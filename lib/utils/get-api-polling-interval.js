"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const lodash_1 = require("lodash");
const warning_messages_1 = require("../templates/warning-messages");
// NOTE: We need to continuously poll BrowserStack APIs in Automate sessions to avoid the idle timeout.
// The value can be reduced for unstable network connections if there is a high risk of random request failures.
const DEFAULT_API_POLLING_INTERVAL = 80000;
// NOTE: the max value is capped at the BrowserStack idle timeout.
// https://www.browserstack.com/automate/timeouts
const MAX_API_POLLING_INTERVAL = 90000;
function default_1() {
    const pollingInterval = lodash_1.toInteger(process.env.TESTCAFE_BROWSERSTACK_API_POLLING_INTERVAL) || DEFAULT_API_POLLING_INTERVAL;
    if (pollingInterval > MAX_API_POLLING_INTERVAL)
        process.emitWarning(warning_messages_1.API_POLLING_INTERVAL_IS_TOO_LARGE({ actual: pollingInterval, expected: MAX_API_POLLING_INTERVAL }));
    return pollingInterval;
}
exports.default = default_1;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2V0LWFwaS1wb2xsaW5nLWludGVydmFsLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vc3JjL3V0aWxzL2dldC1hcGktcG9sbGluZy1pbnRlcnZhbC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG1DQUFtQztBQUNuQyxvRUFBa0Y7QUFFbEYsdUdBQXVHO0FBQ3ZHLGdIQUFnSDtBQUNoSCxNQUFNLDRCQUE0QixHQUFHLEtBQUssQ0FBQztBQUUzQyxrRUFBa0U7QUFDbEUsaURBQWlEO0FBQ2pELE1BQU0sd0JBQXdCLEdBQUcsS0FBSyxDQUFDO0FBRXZDO0lBQ0ksTUFBTSxlQUFlLEdBQUcsa0JBQVMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLDBDQUEwQyxDQUFDLElBQUksNEJBQTRCLENBQUM7SUFFMUgsSUFBSSxlQUFlLEdBQUcsd0JBQXdCO1FBQzFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsb0RBQWlDLENBQUMsRUFBRSxNQUFNLEVBQUUsZUFBZSxFQUFFLFFBQVEsRUFBRSx3QkFBd0IsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUU1SCxPQUFPLGVBQWUsQ0FBQztBQUMzQixDQUFDO0FBUEQsNEJBT0MiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB0b0ludGVnZXIgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgQVBJX1BPTExJTkdfSU5URVJWQUxfSVNfVE9PX0xBUkdFIH0gZnJvbSAnLi4vdGVtcGxhdGVzL3dhcm5pbmctbWVzc2FnZXMnO1xuXG4vLyBOT1RFOiBXZSBuZWVkIHRvIGNvbnRpbnVvdXNseSBwb2xsIEJyb3dzZXJTdGFjayBBUElzIGluIEF1dG9tYXRlIHNlc3Npb25zIHRvIGF2b2lkIHRoZSBpZGxlIHRpbWVvdXQuXG4vLyBUaGUgdmFsdWUgY2FuIGJlIHJlZHVjZWQgZm9yIHVuc3RhYmxlIG5ldHdvcmsgY29ubmVjdGlvbnMgaWYgdGhlcmUgaXMgYSBoaWdoIHJpc2sgb2YgcmFuZG9tIHJlcXVlc3QgZmFpbHVyZXMuXG5jb25zdCBERUZBVUxUX0FQSV9QT0xMSU5HX0lOVEVSVkFMID0gODAwMDA7XG5cbi8vIE5PVEU6IHRoZSBtYXggdmFsdWUgaXMgY2FwcGVkIGF0IHRoZSBCcm93c2VyU3RhY2sgaWRsZSB0aW1lb3V0LlxuLy8gaHR0cHM6Ly93d3cuYnJvd3NlcnN0YWNrLmNvbS9hdXRvbWF0ZS90aW1lb3V0c1xuY29uc3QgTUFYX0FQSV9QT0xMSU5HX0lOVEVSVkFMID0gOTAwMDA7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uICgpIHtcbiAgICBjb25zdCBwb2xsaW5nSW50ZXJ2YWwgPSB0b0ludGVnZXIocHJvY2Vzcy5lbnYuVEVTVENBRkVfQlJPV1NFUlNUQUNLX0FQSV9QT0xMSU5HX0lOVEVSVkFMKSB8fCBERUZBVUxUX0FQSV9QT0xMSU5HX0lOVEVSVkFMO1xuXG4gICAgaWYgKHBvbGxpbmdJbnRlcnZhbCA+IE1BWF9BUElfUE9MTElOR19JTlRFUlZBTClcbiAgICAgICAgcHJvY2Vzcy5lbWl0V2FybmluZyhBUElfUE9MTElOR19JTlRFUlZBTF9JU19UT09fTEFSR0UoeyBhY3R1YWw6IHBvbGxpbmdJbnRlcnZhbCwgZXhwZWN0ZWQ6IE1BWF9BUElfUE9MTElOR19JTlRFUlZBTCB9KSk7XG5cbiAgICByZXR1cm4gcG9sbGluZ0ludGVydmFsO1xufVxuIl19